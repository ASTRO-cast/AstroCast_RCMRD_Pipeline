

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>VCI to VCI3M Module &mdash; AstroCast RCMRD Pipeline 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="NDVI to VCI Module" href="NDVI_to_VCI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> AstroCast RCMRD Pipeline
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">AstroCast Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Aggregate.html">Aggregation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CreatePDF.html">Reports Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Forecast.html">Forecast Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="GaussianProcesses.html">Gaussian Processes Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="NDVI_Normalisation.html">NDVI Normalisation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="NDVI_to_VCI.html">NDVI to VCI Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">VCI to VCI3M Module</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#indices-and-tables">Indices and tables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AstroCast RCMRD Pipeline</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">AstroCast Modules</a> &raquo;</li>
        
      <li>VCI to VCI3M Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/VCI_To_VCI3M.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vci-to-vci3m-module">
<h1>VCI to VCI3M Module<a class="headerlink" href="#vci-to-vci3m-module" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-AstroCast.VCI_To_VCI3M"></span><p>Module used for converting VCI into VCI3M.</p>
<p>The class within this module completes moving average of 9 VCI tif files.
As the tif files are stored in dekadals, 9 tif images will cover the duration
of 90 days (3 months). This index is used by various organisations as an
indicator of drought. These images will eventually be aggregated to some level
and the GP code run on it to forecast how it will change over time.</p>
<p>Created on Tue Mar 24 15:09:55 2020</p>
<p>&#64;author: Andrew Bowell</p>
<dl class="class">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M">
<em class="property">class </em><code class="sig-prename descclassname">AstroCast.VCI_To_VCI3M.</code><code class="sig-name descname">convert_VCI_to_VCI3M</code><span class="sig-paren">(</span><em class="sig-param">File_List</em><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that houses the functions for the VCI to VCI3M averaging.</p>
<p>The main bulk of the code will be the moving average.</p>
<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.files">
<code class="sig-name descname">files</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.files" title="Permalink to this definition">¶</a></dt>
<dd><p>List of file paths to the VCI tif data</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">List</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.average_list">
<code class="sig-name descname">average_list</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.average_list" title="Permalink to this definition">¶</a></dt>
<dd><p>A list that will have 9 VCI images in at once. This will allow the
calculation of the last 90 days of VCI3M at any given timestep.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">NumPy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.out_meta">
<code class="sig-name descname">out_meta</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.out_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains different data about the tif file including projection,dtype,
fill value and more.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dictionary</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.VCI3M">
<code class="sig-name descname">VCI3M</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.VCI3M" title="Permalink to this definition">¶</a></dt>
<dd><p>2-D array that contains the averaged 90 days of VCI for the given
timestep.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">NumPy</span> <span class="pre">array</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.date">
<code class="sig-name descname">date</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.date" title="Permalink to this definition">¶</a></dt>
<dd><p>The unformatted (%Y%m%d) date the data was taken on E.g 20010101</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.VCI">
<code class="sig-name descname">VCI</code><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.VCI" title="Permalink to this definition">¶</a></dt>
<dd><p>The data that is read in by rasterio from th VCI file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">NumPy</span> <span class="pre">array</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<p>Defining some attributes.</p>
<p>The sole purpose of __init__ is to initialize values that will be
needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>File_List</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">List</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – List of filepaths for NDVI raw files</p>
</dd>
</dl>
<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">File_List</em><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Defining some attributes.</p>
<p>The sole purpose of __init__ is to initialize values that will be
needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>File_List</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">List</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – List of filepaths for NDVI raw files</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.change_file_size">
<code class="sig-name descname">change_file_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.change_file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Small function that inserts Nans into the data.</p>
<p>Hopefully this will be removed in future releases. from 2001-2018 the
file size stays consitent, but in 2019 the size of the files drop by
13 rows and 10 columns. This function just inserts NaNs round the edges
of the NDVI file to make it the same size. The numpy.insert function
is used to perform this operation.</p>
<p>This function does not return anything, but does update the NDVI
attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.create_VCI3M">
<code class="sig-name descname">create_VCI3M</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.create_VCI3M" title="Permalink to this definition">¶</a></dt>
<dd><p>This function performs the moving average.</p>
<p>After the inital 9 files have been added onto the list and averaged,
this function continues to read in the new images one by one and
append each one onto the end, popping the first image (oldest image
chronologically) out of the list and then taking the new average.
This allows the pipeline to calculate what the VCI3M is at each time
step. Again, due to t he file size changing, there is currently a
quick check to find what year the data is from. If it is from 2019 the
change_file_size function is called.</p>
<p>This function does not return anythign but once the average has been
calculated, the VCI3M attribute is updated and then the store data
function is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.populate_average_list">
<code class="sig-name descname">populate_average_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.populate_average_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into the list that will be used to average the VCI.</p>
<p>This function is soley responsible for the first 9 files that are
loaded into the class. As we need 9 files to create the average for
the VCI3M the first 8 images solely contribute towards the mean. The
9th image is then the last one to contribute and is then saved under
the 9th images’ name.</p>
<p>This function does not return anything but does call the next function
aswell as updating the average_list and VCI attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.read_meta_data">
<code class="sig-name descname">read_meta_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.read_meta_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reading the VCI metadata</p>
<p>Function does not return anythign but updates the out_meta attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.store_data">
<code class="sig-name descname">store_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AstroCast.VCI_To_VCI3M.convert_VCI_to_VCI3M.store_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Storing the calculated VCI3M data into a tif</p>
<p>This function doesn’t reutrn anything but does use rasterio to write
a new tif file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="NDVI_to_VCI.html" class="btn btn-neutral float-left" title="NDVI to VCI Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Andrew Bowell

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>